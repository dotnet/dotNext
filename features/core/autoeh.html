<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Autogenerated GetHashCode/Equals | .NEXT </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Autogenerated GetHashCode/Equals | .NEXT ">
    <meta name="generator" content="docfx 2.59.0.0">
    
    <link rel="shortcut icon" href="../../fav.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../doc_logo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="autogenerated-gethashcodeequals">Autogenerated GetHashCode/Equals</h1>

<p>Visual Studio IDE can help to <a href="https://docs.microsoft.com/en-us/visualstudio/ide/reference/generate-equals-gethashcode-methods">generate</a> <code>Equals</code> and <code>GetHashCode</code> overrides instead of hand-written implementation. This way has several flaws:</p>
<ul>
<li>Developer can add a new field into the class and forget to take it into account inside of <code>Equals</code> and <code>GetHashCode</code></li>
<li>The result of <code>GetHashCode</code> can be the same between application restarts</li>
<li>A lot of fields declared in the targer class decrese readability of these methods</li>
<li>If one or more fields have custom struct type then you should implement equality/inequality operators for such struct as well as <code>GetHashCode</code> and <code>Equals</code> recursively</li>
</ul>
<p><a class="xref" href="../../api/DotNext.EqualityComparerBuilder-1.html">EqualityComparerBuilder&lt;T&gt;</a> is a way to fix these inconveniences. All you need is to call appropriate builder method in this class and obtains the necessary implementation.</p>
<p>The following example demonstrates recommended usage of this class:</p>
<pre><code class="lang-csharp">using DotNext;

public class Person: IEquatable&lt;Person&gt;
{
    private static readonly Func&lt;Person, Person, bool&gt; equals;
    private static readonly Func&lt;Person, int&gt; hashCode;

    static Person() =&gt; new EqualityComparerBuilder&lt;Person&gt;().Build(out equals, out hashCode);

    public string FirstName { get; set; }
    public string SecondName { get; set; }
    public byte Age { get; set; }

    public override int GetHashCode() =&gt; hashCode(this);
    public bool Equals(Person other) =&gt; equals(this, other);
    public override bool Equals(object other) =&gt; Equals(other as Person);
}
</code></pre>
<p>Constructed methods rely on the instance fields (public and private) declared in the specified class and its ancestors. But some fields can be excluded from the generated code using <code>ExcludedFields</code> property.</p>
<div class="IMPORTANT">
<h5>Important</h5>
<p>It is not recommended to call builder method multiple times with the same generic argument. Code generation process is expensive and may affect performance of your application. The recommended approach is to cache generated methods. Additionally, generated code inside of these methods don't provide nullability check of the first passed argument because expected behavior is a passing of <strong>this</strong> parameter.</p>
</div>
<p>Automatically generated implementation of equality check follows certain rules:</p>
<ul>
<li>If field is of reference type then equality comparison between two values of the field based on <a href="https://docs.microsoft.com/en-us/dotnet/api/system.object.equals">Object.Equals</a> method</li>
<li>If field is of value type then equality comparison between two values of the field based on bitwise equality provided by <a class="xref" href="../../api/DotNext.BitwiseComparer-1.html">BitwiseComparer&lt;T&gt;</a> class.</li>
<li>Simple equality check is performed for field of primitive or pointer type</li>
<li><a class="xref" href="../../api/DotNext.OneDimensionalArray.html">OneDimensionalArray</a> is performed for field of array type whose elements are of value type</li>
<li><a href="https://docs.microsoft.com/en-us/dotnet/api/system.linq.enumerable.sequenceequal">Enumerable.SequenceEqual</a> is used to compare elements in the array if field has array type whose elements are of reference type.</li>
</ul>
<p>Automatically generated implementation of hash code function follows the similar rules:</p>
<ul>
<li>For field of primite type, conversion to <code>int</code> is performed</li>
<li><a href="https://docs.microsoft.com/en-us/dotnet/api/system.object.gethashcode">Object.GetHashCode</a> is used for field of reference type</li>
<li>Bitwise hash code located in <a class="xref" href="../../api/DotNext.BitwiseComparer-1.html">BitwiseComparer&lt;T&gt;</a> class is performed for field of value type</li>
<li>Bitwise hash code located in <a class="xref" href="../../api/DotNext.OneDimensionalArray.html">OneDimensionalArray</a> class is performed for field of array type whose elements are of value type</li>
<li>Sequence hash code located in <a class="xref" href="../../api/DotNext.Collections.Generic.Sequence.html">Sequence</a> class is performed for field of array type whose elements are of reference type</li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/dotnet/dotNext/blob/gh-pages/docs/features/core/autoeh.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <div class="toggle-mode">
                <div class="icon">
                  <i aria-hidden="true">☀</i>
                </div>
                <label class="switch">
                  <input type="checkbox" id="switch-style">
                  <span class="slider round"></span>
                </label>
                <div class="icon">
                  <i aria-hidden="true">☾</i>
                </div>
              </div>
          
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <h5>In This Article</h5>
              <div></div>
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <div class="pull-left">
              Supported by the <a href="https://dotnetfoundation.org">.NET Foundation</a>
              
            </div>
            <div class="toggle-mode pull-right visible-sm visible-xs">
              <div class="icon">
                <i aria-hidden="true">☀</i>
              </div>
              <label class="switch">
                <input type="checkbox" id="switch-style-m">
                <span class="slider round"></span>
              </label>
              <div class="icon">
                <i aria-hidden="true">☾</i>
              </div>
            </div>
          </div>
        </div>
        <script type="text/javascript" src="../../styles/toggle-theme.js"></script>
      </footer>    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
